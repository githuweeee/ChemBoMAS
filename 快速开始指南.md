# BoMAS 实验结果上传 - 快速开始指南

## 🚀 立即开始使用（3分钟）

### 第0步: 环境准备（首次使用必做）

```powershell
# 进入项目目录
cd C:\Users\Techsinn\ChemBoMAS

# 创建虚拟环境（如果还没有）
python -m venv .venv

# 激活虚拟环境（PowerShell）
.\.venv\Scripts\Activate.ps1

# 安装依赖
pip install -r agent_zyf/requirements.txt
```

---

### 第1步: 启动服务（30秒）

```powershell
# 启动服务
adk web
```

> 若提示 `adk: command not found`，请改用：
> ```powershell
> python -m google.adk web
> ```

---

### 第2步: 了解完整工作流程（2分钟）

以下是**完整的一轮优化闭环**，包含第一次探索实验设计、迭代与效果检查：

1. **第一次探索实验设计（初始化）**
   - 请先进行几次人工探索实验，确定参数范围与优化目标，例如需要调整的温度、压力、时间、浓度等变量。变量范围应尽量大一些，比如某一反应可能的温度大概是100℃，那么在人工探索时可在20与120℃时进行两次实验。
   - 根据example.csv准备初始数据 CSV（含参数列与目标列）并在页面中上传。
   - 与AI交谈输入/确认参数范围（bounds）、优化目标、单次可进行的平行实验量batch_size等。
   - AI将分析初始数据，调用 `build_campaign_and_recommend` 生成**第一批探索推荐**。

2. **生成结果模板**
   - 推荐的实验条件保存在/session/experiment_log.csv中，可以下载到本地进行实验。
   - 也可调用 `generate_result_template` 生成标准模板。

3. **开展实验并填写结果**
   - 按推荐条件做实验。
   - 填写experiment_log.csv或者模板中的目标值（Target_*），保持纯数值。

4. **上传实验结果**
   - 上传填写后的experiment_log.csv或CSV 内容。

5. **检查收敛**
   - 调用 `check_convergence` 查看是否已经收敛，或根据经验判断是否收敛。
   - 若未收敛，进入下一轮迭代。

6. **迭代优化**
   - 命令AI，生成下一轮推荐参数，调用 `generate_recommendations` 生成下一轮推荐。
   - 重复步骤 2~5，直到收敛或达到预算（例如实验预算、时间预算等）。

7. **分析与报告（可选）**
   - 调用 `fitting` 相关工具生成性能分析、特征重要性、轨迹/分布图。

---

### 工具清单

| 工具 | 功能 | 何时使用 |
|------|------|---------|
| build_campaign_and_recommend | 构建Campaign并生成首批推荐 | 第一次优化 |
| generate_recommendations | 生成实验推荐 | 后续轮次 |
| generate_result_template | 生成结果模板 | 获得推荐后 |
| upload_experimental_results | 上传实验结果 | 实验完成后 |
| check_convergence | 检查收敛性 | 上传结果后 |
| get_campaign_info | 查询Campaign信息 | 需要诊断时 |
| check_agent_health | 健康检查 | 遇到问题时 |

---

*快速开始指南 v1.1*  
*最后更新: 2026-01-19*
